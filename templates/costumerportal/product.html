{% extends "costumerportal/layout.html" %}
{% load static %}

{% block title %}
  {{ product.name }}
{% endblock title %}
{% block js %}
    <script src="{% static 'js/product.js' %}"></script>
{% endblock js %}

{% block body %}
<div class="container my-5">
  <div class="row">
    <!-- Carousel + Title + Description -->
    <div class="col-md-6">
      <!-- Carousel -->
      <div id="productCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
        <div class="carousel-inner">
          {% for image in product.images.all %}
          <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <img src="{{ image.image.url }}" class="d-block w-100 custom-img" alt="Product Image">
          </div>
          {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon"></span>
        </button>
      </div>

      <!-- Product Info -->
      <h2 class="mt-3">{{ product.name }}</h2>
      <p>{{ product.description }}</p>
      
    </div>

    <!-- Order Form -->
    <div class="col-md-6">
      <h4 class="mb-4">Fill in your information below and click "Confirm Order"</h4>
      <h4 class="text-success" id="product_price">{{product.price}} DZD</h4>
      <form method="post">
        {% csrf_token %}
        <div class="mb-3">
          <label class="form-label">Full Name</label>
          <input type="text" class="form-control" name="full_name" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Phone Number</label>
          <input type="text" class="form-control" name="phone" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Choose Wilaya</label>
          <select class="form-select" name="wilaya" required>
            <option selected disabled>Select Wilaya</option>
            {% for w in wilayas %}
              <option value="{{ w }}">{{ w }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Full Address</label>
          <input type="text" class="form-control" name="address" required>
        </div>
        <div class="mb-3 d-flex align-items-center gap-2">
            <label class="form-label mb-0">quantity </label>
            <button type="button" class="btn btn-outline-secondary btn-sm" id="decrease">-</button>
            <input type="number" id="quantity" name="quantity" class="form-control text-center" style="width: 60px;" value="1" min="1">
            <button type="button" class="btn btn-outline-secondary btn-sm" id="increase">+</button>
        </div>
        <!--
        <div class="mb-3">
          <label class="form-label">Color / Size</label>
          <input type="text" class="form-control" name="option" required>
        </div>
        -->
        <!-- Order Summary -->
        <div class=" p-3">
          <h5>Order Summary</h5>
          <p>Product: <strong>{{product.name}}</strong></p>
          <p>Quantity: <strong><span id="quan">1</span> Ã— {{product.price}} DZD</strong></p>
          <p>Shipping Price: <strong>Select Wilaya</strong></p>
          <p>Total: <strong ><span id="total">{{product.price}}</span> DZD</strong></p>
        </div>

        <button type="submit" class="btn btn-success w-100 mt-3">Confirm Order</button>
      </form>
    </div>
  </div>
</div>



{% endblock body %}